# Pipeline Configuration
# Centralizes all file paths, API IDs, and settings per ADR-1 (Configuration-Driven Pipeline)
# This enables non-developers to adjust config without touching code

[dirs]
raw_data = "data/00-raw"
staging = "data/01-staging"
validated = "data/02-validated"
erp_export = "data/03-erp-export"

[pipeline]
steps = ["ingest", "transform", "validate", "export"]

# Raw Sources Configuration (maps to ingest.py RAW_SOURCES)
[sources.import_export_receipts]
type = "folder"
description = "Import/Export Receipts: Year/month files with CT.NHAP, CT.XUAT, XNT tabs"
folder_ids = [
    "16CXAGzxxoBU8Ui1lXPxZoLVbDdsgwToj",  # Folder 7 (most recent/active)
    "1Q2-P4aeJfKEVuT69akFHcgrxMsB2mrrU",  # Folder 5
    "1SYlk8Uztzd8asEZp6SK1yfF-EL0-t_sc",  # Folder 4
    "1p4XXU0nOsJc2Rr2_vJa3YluqmjPtzWRo",  # Folder 3
    "1ZJY7aJ-eRdoqYA1NE9ByfHeiYnxq1cFZ",  # Folder 2
    "1QIP6LCr6lANzzRnAZPmVg7wIWdUmhs6q",  # Folder 6
    "1RbkY2dd1IaqSHhnivjh6iejKv9mpkSJ_",  # Folder 1
]
tabs = ["CT.NHAP", "CT.XUAT", "XNT"]
output_subdir = "import_export"

[sources.receivable]
type = "spreadsheet"
description = "Receivable: customer debt ledger + customer info"
spreadsheet_id = "1kouZwJy8P_zZhjjn49Lfbp3KN81mhHADV7VKDhv5xkM"
output_subdir = "receivable"

[[sources.receivable.sheets]]
name = "TỔNG CÔNG NỢ"
output_file = "receivable_summary"

[[sources.receivable.sheets]]
name = "Thong tin KH"
output_file = "receivable_customers"

[sources.payable]
type = "spreadsheet"
description = "Payable: supplier master + debt ledger"
spreadsheet_id = "1b4LWWyfddfiMZWnFreTyC-epo17IR4lcbUnPpLW8X00"
output_subdir = "payable"

[[sources.payable.sheets]]
name = "MÃ CTY"
output_file = "payable_master"

[[sources.payable.sheets]]
name = "TỔNG HỢP"
output_file = "payable_summary"

[sources.cashflow]
type = "spreadsheet"
description = "CashFlow: deposits and cash transactions"
spreadsheet_id = "1OZ0cdEob37H8z0lGEI4gCet10ox5DgjO6u4wsQL29Ag"
output_subdir = "cashflow"

[[sources.cashflow.sheets]]
name = "Tiền gửi"
output_file = "cashflow_deposits"

[[sources.cashflow.sheets]]
name = "Tien mat"
output_file = "cashflow_cash"

# External data sources for enrichment
[enrichment]
product_lookup_spreadsheet_id = "16bGN2gjWspCqlFD4xB--7WtkYtTpDaWzRQx9sV97ed8"
product_lookup_sheet_gid = 23224859
